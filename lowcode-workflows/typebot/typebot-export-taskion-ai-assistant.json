{"version":"6","id":"cmez2omtc0009tdvahkkdovlk","name":"Taskion AI Assistant","events":[{"id":"xwlgsfcce0y55u856gojddpi","outgoingEdgeId":"lbrdmeyx1x6bkbioo7wecn3m","graphCoordinates":{"x":-150.75,"y":9.26},"type":"start"}],"groups":[{"id":"yr2q46i30zxgwiinv6brmoq0","title":"Set session Id","graphCoordinates":{"x":188.67,"y":10.63},"blocks":[{"id":"rq4aoc8p2pstqidaikmcvt62","outgoingEdgeId":"e1m1i8foxcwg72pvwbo04hwx","type":"Set variable","options":{"variableId":"vbug4skz4mz00fli3lckkzqcw","type":"Random ID"}}]},{"id":"hjrylst0hc2zfofx0sartiff","title":"Question","graphCoordinates":{"x":2508.12,"y":342.96},"blocks":[{"id":"fap2ne6fob0sn2ekqlqwpko3","outgoingEdgeId":"yk0krsb8jake3dc2v5biq43g","type":"text input","options":{"variableId":"vnq5h7ab1mpa34rmprjay6v86"}}]},{"id":"me7p69wsl9936hly5vy168bo","title":"Answer","graphCoordinates":{"x":2984.92,"y":277.41},"blocks":[{"id":"mzupxh42g1iehihttpbtj8f8","type":"Webhook","options":{"variablesForTest":[],"responseVariableMapping":[{"id":"ajjpxop770ty7fsqmo6gxvve","variableId":"vsmvvyy2lbuleq1ofkcudtomo","bodyPath":"data.output"}],"isAdvancedConfig":true,"isCustomBody":true,"webhook":{"headers":[{"id":"fsmo3rej5gs6vi9pv9z05lx3","key":"","value":""}],"method":"POST","url":"https://n8n.taskion.matheusousa.dev/webhook/ai-chat","body":"{\n  \"message\": \"{{message}}\",\n  \"session_id\": \"{{sessionId}}\",\n  \"user_id\": \"{{userId}}\"\n}"}}},{"id":"k655gdiczwgzb78x1dcjis7s","outgoingEdgeId":"jrr3nuoq91jr5g37mmoqp4ka","type":"text","content":{"richText":[{"type":"p","children":[{"text":"{{answer}}"}]}]}}]},{"id":"zeptu7zkole5vbjl6lrfernr","title":"Greeting","graphCoordinates":{"x":347.32,"y":461.04},"blocks":[{"id":"u2cf1k7ps2hmwms13u3o4x6v","type":"text","content":{"richText":[{"type":"p","children":[{"text":"üëã Hi! I‚Äôm Taskion AI Assistant. I help you organize your tasks smarter with AI ‚Äî from enhancing your descriptions to planning your activities."}]}]}},{"id":"wb7sbfyqgqgalof6bzv5lz5o","type":"text","content":{"richText":[{"type":"p","children":[{"text":"üìß To get started, please enter your email so we can personalize your experience and keep your tasks safe. "}]}]}},{"id":"ov52zi66qop1mey5k13a5ccw","type":"email input","options":{"variableId":"vhergz6frybq7t85fu9qp83wp"}},{"id":"p1lyutk7q0y390vka543vhwr","outgoingEdgeId":"cg7jg45rpuqzeetjuiujp7x1","type":"Set variable","options":{"variableId":"vhergz6frybq7t85fu9qp83wp","expressionToEvaluate":"{{userEmail}}.toLowerCase()","isCode":false}}]},{"id":"s2csgnd50j12rdikm48ezzxe","title":"Get User By E-mail","graphCoordinates":{"x":869.5,"y":855.75},"blocks":[{"id":"ycjwvavfo5uyxninndfjktez","type":"Webhook","options":{"variablesForTest":[{"id":"c8cprr4ptuavz8b5bp4l4mzk","value":""}],"responseVariableMapping":[{"id":"xr7fttx7j9ghiu3frpiuxat4","variableId":"vvqdw9cv4t07uroflirkwlv3h","bodyPath":"data.data.id"},{"id":"u4g0q7sysud1iqc72zw34mwo","variableId":"vftzpezvwwebfl9qeul9z9xgo","bodyPath":"data.data.name"}],"isAdvancedConfig":true,"webhook":{"headers":[{"id":"pcty9lpwo1iffhiegnyme7b0","key":"x-api-key","value":"Mrq1Q0aDR5LCqgTqq07xZDwEPxj5Wopw"}],"method":"GET","url":"https://app.taskion.matheusousa.dev/api/users/email/{{userEmail}}"}}},{"id":"gxzv8prc02ppk6xwvjandcz2","outgoingEdgeId":"d4eqxjgxlfb2tdpiptfn88vf","type":"Condition","items":[{"id":"yasbnhsqe0cu2e0u6q8gd9c9","outgoingEdgeId":"chef74tekqyr0ioo1pd5d9o9","content":{"comparisons":[{"id":"z84y0dx6g957fw4wq9xkf6sj","variableId":"vvqdw9cv4t07uroflirkwlv3h","comparisonOperator":"Is set"}]}}]}]},{"id":"devodb36jn9gk7rplp65d82j","title":"Confirm e-mail","graphCoordinates":{"x":1531.75,"y":426.51},"blocks":[{"id":"sdu8xpycobaxhsavyx64ce1e","type":"text","content":{"richText":[{"type":"p","children":[{"text":"Hmm‚Ä¶ we didn‚Äôt find a user with this email: "},{"bold":true,"text":"{{userEmail}}"},{"text":". Are you sure it‚Äôs typed correctly? "}]}]}},{"id":"n0v8yfyez5p5bsrqswqade0k","type":"text","content":{"richText":[{"type":"p","children":[{"text":"Reply with the option number:"}]},{"type":"p","children":[{"text":"1Ô∏è‚É£ Yes, it‚Äôs correct"}]},{"type":"p","children":[{"text":"2Ô∏è‚É£ No, I want to try again "}]}]}},{"id":"smv8rgdz2ukunxyqnuruju5n","type":"text input","options":{"variableId":"vefdpdjnmfi7bure79jd60060"}},{"id":"yo0dp07l0v22txbphjth8lcf","outgoingEdgeId":"xpnyqb7mjnevay3f8rkl0agc","type":"Condition","items":[{"id":"supcb1g2zej7fwyyo84oyep7","outgoingEdgeId":"rm5s16amy1o14v55mge38phw","content":{"comparisons":[{"id":"hzyxh4n8xrzshfnyuhfllmr5","variableId":"vefdpdjnmfi7bure79jd60060","comparisonOperator":"Equal to","value":"1"}]}},{"id":"ob4chtdzdkqlio7uxnw7mtrq","outgoingEdgeId":"ccbiku3ezvbksxi4uu04ot18","content":{"comparisons":[{"id":"mbn2c137gwz0j5msgrka0dst","variableId":"vefdpdjnmfi7bure79jd60060","comparisonOperator":"Equal to","value":"2"}]}}]}]},{"id":"rtib2oov8kl5nfhoe4pa0zq4","title":"Create Account","graphCoordinates":{"x":2119.91,"y":72.13},"blocks":[{"id":"dhzqv4wkmd7lotc6uwt2vwrm","type":"text","content":{"richText":[{"type":"p","children":[{"text":"Ok! So it looks like you don‚Äôt have an account yet. Please share your full name so we can register you."}]}]}},{"id":"bfxuwzsducyk4rgu7h34kc3l","type":"text input","options":{"labels":{"placeholder":"Type your full name..."},"variableId":"vftzpezvwwebfl9qeul9z9xgo","isLong":false}},{"id":"xkb959nwvlsr7pww9goj8f7p","type":"Webhook","options":{"responseVariableMapping":[{"id":"q0p4dxs9cnmtqay4m9iinxol","variableId":"vvqdw9cv4t07uroflirkwlv3h","bodyPath":"data.data.id"}],"isAdvancedConfig":true,"isCustomBody":true,"webhook":{"method":"POST","url":"https://app.taskion.matheusousa.dev/api/users","body":"{\n  \"name\": \"{{userName}}\",\n  \"email\": \"{{userEmail}}\"\n}"}}},{"id":"agfgpaw1ssazh5fapgl4f1p3","type":"text","content":{"richText":[{"type":"p","children":[{"text":"üéâ "},{"text":"Your account has been created successfully!","italic":true},{"text":" "}]}]}},{"id":"w7x6sbgklx6wgin5w5rer3qd","type":"text","content":{"richText":[{"type":"p","children":[{"text":"üëã "},{"bold":true,"text":"Welcome, {{userName}}!"},{"text":"\n I‚Äôm your Taskion AI Assistant, here to help you stay organized."}]},{"type":"p","children":[{"text":""}]},{"type":"p","children":[{"text":"Here‚Äôs what I can do for you:"}]},{"type":"p","children":[{"text":" ‚úÖ Create new tasks"}]},{"type":"p","children":[{"text":" üìã List your pending tasks"}]},{"type":"p","children":[{"text":" üí° Answer any questions you may have‚Ä¶and much more!"}]},{"type":"p","children":[{"text":""}]},{"type":"p","children":[{"text":" Just tell me what you need, and I‚Äôll do my best to help."}]}]}},{"id":"umwbfc3kri92ps6499vd5350","outgoingEdgeId":"wqexmscs3xmke72rypzz04pq","type":"text","content":{"richText":[{"type":"p","children":[{"text":"What would you like to do now?"}]}]}}]},{"id":"np83kypopmqp95y4rmyt4fhu","title":"Wrong E-mail","graphCoordinates":{"x":2135.65,"y":1052.76},"blocks":[{"id":"czayiqlb46qtayoj9i1xrc7k","outgoingEdgeId":"h5mimk3li7zobe34btckf4k3","type":"text","content":{"richText":[{"type":"p","children":[{"text":"No problem! Please enter your email again."}]}]}}]},{"id":"cz7ay1jy4u7w7yz3l1pmi4of","title":"Invalid answer","graphCoordinates":{"x":2131.02,"y":1247.42},"blocks":[{"id":"dd4qd6p3d77n61f9eb1b8u02","outgoingEdgeId":"cq4al7ml7zvxwjcymvnazdyp","type":"text","content":{"richText":[{"type":"p","children":[{"text":"Sorry, I didn‚Äôt get that. "}]}]}}]},{"id":"uxddg09qem083wbzka0apq1z","title":"Check Preseted Variables","graphCoordinates":{"x":642.41,"y":33.35},"blocks":[{"id":"y7pzuer5zfmf3mnr5y9iu9sf","outgoingEdgeId":"wo1nyor65176fxmh07k8cq1h","type":"Condition","items":[{"id":"dh0ud3du8bi5htypnvohzy5a","outgoingEdgeId":"o4isoo022qnufps7wpe01t1z","content":{"comparisons":[{"id":"iw5pf00k5n48m2dpascoe664","variableId":"vhergz6frybq7t85fu9qp83wp","comparisonOperator":"Matches regex","value":"/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$/"}]}}]}]}],"edges":[{"id":"yk0krsb8jake3dc2v5biq43g","from":{"blockId":"fap2ne6fob0sn2ekqlqwpko3"},"to":{"groupId":"me7p69wsl9936hly5vy168bo"}},{"id":"lbrdmeyx1x6bkbioo7wecn3m","from":{"eventId":"xwlgsfcce0y55u856gojddpi"},"to":{"groupId":"yr2q46i30zxgwiinv6brmoq0"}},{"id":"jrr3nuoq91jr5g37mmoqp4ka","from":{"blockId":"k655gdiczwgzb78x1dcjis7s"},"to":{"groupId":"hjrylst0hc2zfofx0sartiff"}},{"id":"rm5s16amy1o14v55mge38phw","from":{"blockId":"yo0dp07l0v22txbphjth8lcf","itemId":"supcb1g2zej7fwyyo84oyep7"},"to":{"groupId":"rtib2oov8kl5nfhoe4pa0zq4"}},{"id":"ccbiku3ezvbksxi4uu04ot18","from":{"blockId":"yo0dp07l0v22txbphjth8lcf","itemId":"ob4chtdzdkqlio7uxnw7mtrq"},"to":{"groupId":"np83kypopmqp95y4rmyt4fhu","blockId":"czayiqlb46qtayoj9i1xrc7k"}},{"id":"xpnyqb7mjnevay3f8rkl0agc","from":{"blockId":"yo0dp07l0v22txbphjth8lcf"},"to":{"groupId":"cz7ay1jy4u7w7yz3l1pmi4of"}},{"id":"h5mimk3li7zobe34btckf4k3","from":{"blockId":"czayiqlb46qtayoj9i1xrc7k"},"to":{"groupId":"zeptu7zkole5vbjl6lrfernr"}},{"id":"d4eqxjgxlfb2tdpiptfn88vf","from":{"blockId":"gxzv8prc02ppk6xwvjandcz2"},"to":{"groupId":"devodb36jn9gk7rplp65d82j"}},{"id":"wqexmscs3xmke72rypzz04pq","from":{"blockId":"umwbfc3kri92ps6499vd5350"},"to":{"groupId":"hjrylst0hc2zfofx0sartiff","blockId":"fap2ne6fob0sn2ekqlqwpko3"}},{"id":"cq4al7ml7zvxwjcymvnazdyp","from":{"blockId":"dd4qd6p3d77n61f9eb1b8u02"},"to":{"groupId":"devodb36jn9gk7rplp65d82j","blockId":"n0v8yfyez5p5bsrqswqade0k"}},{"id":"cg7jg45rpuqzeetjuiujp7x1","from":{"blockId":"p1lyutk7q0y390vka543vhwr"},"to":{"groupId":"s2csgnd50j12rdikm48ezzxe","blockId":"ycjwvavfo5uyxninndfjktez"}},{"id":"chef74tekqyr0ioo1pd5d9o9","from":{"blockId":"gxzv8prc02ppk6xwvjandcz2","itemId":"yasbnhsqe0cu2e0u6q8gd9c9"},"to":{"groupId":"rtib2oov8kl5nfhoe4pa0zq4","blockId":"w7x6sbgklx6wgin5w5rer3qd"}},{"id":"e1m1i8foxcwg72pvwbo04hwx","from":{"blockId":"rq4aoc8p2pstqidaikmcvt62"},"to":{"groupId":"uxddg09qem083wbzka0apq1z","blockId":"y7pzuer5zfmf3mnr5y9iu9sf"}},{"id":"o4isoo022qnufps7wpe01t1z","from":{"blockId":"y7pzuer5zfmf3mnr5y9iu9sf","itemId":"dh0ud3du8bi5htypnvohzy5a"},"to":{"groupId":"s2csgnd50j12rdikm48ezzxe"}},{"id":"wo1nyor65176fxmh07k8cq1h","from":{"blockId":"y7pzuer5zfmf3mnr5y9iu9sf"},"to":{"groupId":"zeptu7zkole5vbjl6lrfernr"}}],"variables":[{"id":"vftzpezvwwebfl9qeul9z9xgo","name":"userName","isSessionVariable":false},{"id":"vefdpdjnmfi7bure79jd60060","name":"isEmailCorrect","isSessionVariable":false},{"id":"vvqdw9cv4t07uroflirkwlv3h","name":"userId","isSessionVariable":true},{"id":"vhergz6frybq7t85fu9qp83wp","name":"userEmail","isSessionVariable":false},{"id":"vsmvvyy2lbuleq1ofkcudtomo","name":"answer","isSessionVariable":true},{"id":"vnq5h7ab1mpa34rmprjay6v86","name":"message","isSessionVariable":false},{"id":"vbug4skz4mz00fli3lckkzqcw","name":"sessionId","isSessionVariable":false}],"theme":{"general":{"font":{"type":"Custom"},"background":{"type":"None"},"progressBar":{"isEnabled":false}},"chat":{"container":{"border":{"thickness":0,"color":"#ebebeb"}},"hostAvatar":{"isEnabled":true,"url":"data:image/svg+xml;utf8,<svg fill='%23ffffff' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512'><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc. --><path d='M152.1 38.2c9.9 8.9 10.7 24 1.8 33.9l-72 80c-4.4 4.9-10.6 7.8-17.2 7.9s-12.9-2.4-17.6-7L7 113C-2.3 103.6-2.3 88.4 7 79s24.6-9.4 33.9 0l22.1 22.1 55.1-61.2c8.9-9.9 24-10.7 33.9-1.8zm0 160c9.9 8.9 10.7 24 1.8 33.9l-72 80c-4.4 4.9-10.6 7.8-17.2 7.9s-12.9-2.4-17.6-7L7 273c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l22.1 22.1 55.1-61.2c8.9-9.9 24-10.7 33.9-1.8zM224 96c0-17.7 14.3-32 32-32H480c17.7 0 32 14.3 32 32s-14.3 32-32 32H256c-17.7 0-32-14.3-32-32zm0 160c0-17.7 14.3-32 32-32H480c17.7 0 32 14.3 32 32s-14.3 32-32 32H256c-17.7 0-32-14.3-32-32zM160 416c0-17.7 14.3-32 32-32H480c17.7 0 32 14.3 32 32s-14.3 32-32 32H192c-17.7 0-32-14.3-32-32zM48 368a48 48 0 1 1 0 96 48 48 0 1 1 0-96z'/></svg>"},"guestAvatar":{"isEnabled":false},"hostBubbles":{"backgroundColor":"#f0eee6","border":{"thickness":1,"color":"#ebebeb"}},"guestBubbles":{"backgroundColor":"#f0eee6","color":"#303235","border":{"thickness":1,"color":"#ebebeb"}},"buttons":{"backgroundColor":"#c96442"},"inputs":{"border":{"thickness":1,"color":"#666460"}}}},"selectedThemeTemplateId":"typebot-light","settings":{"general":{"isBrandingEnabled":false},"publicShare":{"isEnabled":true}},"createdAt":"2025-08-31T02:29:47.519Z","updatedAt":"2025-09-03T06:25:21.876Z","icon":null,"folderId":null,"publicId":"taskion-ai-assistant","customDomain":null,"workspaceId":"cmevpm2yw0001tdvauz12bzfd","resultsTablePreferences":null,"isArchived":false,"isClosed":false,"whatsAppCredentialsId":null,"riskLevel":null}